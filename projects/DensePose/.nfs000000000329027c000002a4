source ~/.bashrc_liqianma

# python train_net.py --config-file configs/densepose_rcnn_R_101_FPN_DL_WC1_s1x_ft.yaml \
#     SOLVER.IMS_PER_BATCH 6 SOLVER.BASE_LR 0.005

# python train_net.py --config-file configs/densepose_rcnn_R_101_FPN_DL_WC1_s1x_ft2.yaml \
#     SOLVER.IMS_PER_BATCH 2 SOLVER.BASE_LR 0.0025


# python train_net.py --config-file configs/HRNet/densepose_rcnn_HRFPN_HRNet_w48_s1x.yaml\
#     SOLVER.IMS_PER_BATCH 2 SOLVER.BASE_LR 0.0075 

# cfg_name='densepose_rcnn_R_101_FPN_DL_s1x'
# cfg_name='densepose_rcnn_R_101_FPN_DL_s1x_InsSeg'
# python train_net.py --config-file configs/${cfg_name}.yaml \
# 	--resume \
#     SOLVER.IMS_PER_BATCH 2 SOLVER.BASE_LR 0.0025 \
#     OUTPUT_DIR ./output/${cfg_name} \
#     MODEL.WEIGHTS ./output/${cfg_name}/model_0034999.pth \
#     # DATALOADER.NUM_WORKERS 1
# #     # MODEL.WEIGHTS ../../pretrain/


cfg_name='densepose_CondInst_R_50_s1x'
CUDA_LAUNCH_BLOCKING=1 python train_net.py --config-file configs/${cfg_name}.yaml \
	--resume \
    SOLVER.IMS_PER_BATCH 2 SOLVER.BASE_LR 0.0025 \
    SOLVER.CLIP_GRADIENTS.ENABLED True \
    OUTPUT_DIR ./output/${cfg_name}_1chSeg_cropResizeNew_deeperIUVHead_RelCoord \
    MODEL.ROI_DENSEPOSE_HEAD.NUM_COARSE_SEGM_CHANNELS 1 \
    MODEL.ROI_DENSEPOSE_HEAD.COARSE_SEGM_TRAINED_BY_MASKS True \
    SOLVER.CHECKPOINT_PERIOD 5000 \
    DATALOADER.NUM_WORKERS 2 \
	MODEL.ROI_DENSEPOSE_HEAD.LOSS_NAME "DensePoseChartGlobalIUVSeparatedSCropResizeLoss" \
	MODEL.CONDINST.IUVHead.NUM_CONVS 14 \
	MODEL.ROI_DENSEPOSE_HEAD.REL_COORDS True \
	# MODEL.ROI_DENSEPOSE_HEAD.NAME "DensePoseDeepLabHead" \
	# MODEL.ROI_DENSEPOSE_HEAD.POINT_REGRESSION_WEIGHTS 1.0 \
	# SOLVER.WARMUP_ITERS 2000
    # SOLVER.CLIP_GRADIENTS.ENABLED True SOLVER.CLIP_GRADIENTS.CLIP_TYPE norm SOLVER.CLIP_GRADIENTS.CLIP_VALUE 100.0\


# ./run_train_dp_2.sh

# cfg_name='densepose_CondInst_R_101_s1x'
# CUDA_LAUNCH_BLOCKING=1 python train_net.py --config-file configs/${cfg_name}.yaml \
# 	--resume \
#     SOLVER.IMS_PER_BATCH 2 SOLVER.BASE_LR 0.0025 \
#     OUTPUT_DIR ./output/${cfg_name}_1chSeg \
#     MODEL.ROI_DENSEPOSE_HEAD.NUM_COARSE_SEGM_CHANNELS 1 \
#     MODEL.ROI_DENSEPOSE_HEAD.COARSE_SEGM_TRAINED_BY_MASKS True \
#     SOLVER.CHECKPOINT_PERIOD 2000 \
#     # MODEL.CONDINST.IUVHead.NUM_CONVS 7 \
#     # MODEL.ROI_DENSEPOSE_HEAD.INDEX_WEIGHTS 3.0 \
#     # MODEL.WEIGHTS ../../pretrain/CondInst_MS_R_101_3x_sem.pth \
#     # MODEL.CONDINST.MASK_BRANCH.NORM "BN"\
#     # MODEL.ROI_DENSEPOSE_HEAD.POINT_REGRESSION_WEIGHTS 3.0 \
#     # MODEL.ROI_DENSEPOSE_HEAD.INDEX_WEIGHTS 0.
#     # DATALOADER.NUM_WORKERS 1 \

# cfg_name='densepose_CondInst_R_101_s1x'
# CUDA_LAUNCH_BLOCKING=1 python train_net.py --config-file configs/${cfg_name}.yaml \
# 	--resume \
#     SOLVER.IMS_PER_BATCH 2 SOLVER.BASE_LR 0.0025 \
#     OUTPUT_DIR ./output/${cfg_name}_1chSeg_3InsLoss_3meanUVLoss_correctBboxHW \
#     MODEL.ROI_DENSEPOSE_HEAD.NUM_COARSE_SEGM_CHANNELS 1 \
#     MODEL.ROI_DENSEPOSE_HEAD.COARSE_SEGM_TRAINED_BY_MASKS True \
#     SOLVER.CHECKPOINT_PERIOD 2000 \
#     MODEL.ROI_DENSEPOSE_HEAD.INDEX_WEIGHTS 3.0 \
#     MODEL.ROI_DENSEPOSE_HEAD.POINT_REGRESSION_WEIGHTS 3.0 \
#     # MODEL.ROI_DENSEPOSE_HEAD.INDEX_WEIGHTS 0.
#     # MODEL.WEIGHTS ./output/${cfg_name}/model_0129999.pth \
#     # DATALOADER.NUM_WORKERS 1 \

# cfg_name='densepose_CondInst_R_101_DL_s1x'
# CUDA_LAUNCH_BLOCKING=1 python train_net.py --config-file configs/${cfg_name}.yaml \
# 	--resume \
#     SOLVER.IMS_PER_BATCH 2 SOLVER.BASE_LR 0.0025 \
#     OUTPUT_DIR ./output/${cfg_name}_1chSeg \
#     MODEL.ROI_DENSEPOSE_HEAD.NUM_COARSE_SEGM_CHANNELS 1 \
#     MODEL.ROI_DENSEPOSE_HEAD.COARSE_SEGM_TRAINED_BY_MASKS True \
#     # MODEL.ROI_DENSEPOSE_HEAD.INDEX_WEIGHTS 1.0 \
#     # MODEL.ROI_DENSEPOSE_HEAD.INDEX_WEIGHTS 0.
#     # MODEL.WEIGHTS ./output/${cfg_name}/model_0129999.pth \
#     # DATALOADER.NUM_WORKERS 1 \

